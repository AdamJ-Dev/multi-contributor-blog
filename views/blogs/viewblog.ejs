<html lang="en">
<%- include("../partials/head.ejs") %>
<body>
    <div class="view-blog-wrapper">
        <%- include("../partials/nav.ejs") %>
        <div class="container view-blog-date">
            <p class="text-secondary"><%= date %></p>
        </div>
        <div id="hidden-body" class="hidden"><%= body %></div>
        <div class="view-blog container">
            <h1><%= title %></h1>
                <p class="lead"><a href=<%= "/profile/" + blogAuthorId %> class="viewblog-profile-link"><em><%= blogAuthor %></em></a></p>
                <div id="blog-body" class="blog-body-container py-4">
                </div>
        </div>
        
    </div>
<script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
<script src="/javascript/prism.js"></script>
<script>
    marked.setOptions({
    renderer: new marked.Renderer(),
    breaks: true,
    highlight: function(code, lang) {
        if (Prism.languages[lang]) {
            console.log(Prism.highlight)
            console.log("Ahhh")
        return Prism.highlight(code, Prism.languages[lang], lang);
        } else {
        return code;
        }
    }})
    const body = document.getElementById("hidden-body").textContent
    document.getElementById("blog-body").innerHTML = marked(body).replace(/&gt;/g, ">").replace(/&lt;/g, "<").replace(/&#34;/g, '"')
</script>
<%- include("../partials/footer.ejs") %>
<%- include("../partials/footerScripts.ejs") %>
</body>
</html>
